package com.dawes.DAOImpl;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Set;

import com.dawes.DAO.RecetaIngredientesDAO;
import com.dawes.modelo.RecetaIngredientesVO;
import com.dawes.serviciosImpl.ServicioIngredientesImpl;
import com.dawes.serviciosImpl.ServicioRecetaImpl;

public class RecetaIngredientesDAOImpl implements RecetaIngredientesDAO {

	private ResultSet rs;
	private PreparedStatement ps;

	// cada vez que hagamos una conexion/administracion de esta tabla llamaremos a
	// este constructor
	private Connection conexion;

	public RecetaIngredientesDAOImpl(Connection conexion) {
		this.conexion = conexion;
	}

	public int insertar(RecetaIngredientesVO relacionSinId) {
		try {
			ps = conexion.prepareStatement(
					"INSERT INTO recetaingredientes(cantidad,idreceta,idingrediente)" + " VALUES (?,?,?) ");

			ps.setInt(1, relacionSinId.getCantidad());
			// para introducir los id, debemos de buscar los objetos que pasamos en la base
			// de datos
			// cojer su id e introducirlo en ?
			ServicioRecetaImpl servicioReceta = new ServicioRecetaImpl();
			ServicioIngredientesImpl servicioIngrediente = new ServicioIngredientesImpl();
			
			ps.setInt(2,servicioReceta.mostrarReceta(relacionSinId.getIdreceta().getNombre()).getIdReceta() );
			ps.setInt(3,servicioIngrediente.mostrarIngrediente(relacionSinId.getIdreceta().getNombre()).getIdingredientes());
			
			ps.executeUpdate();
			return 1;
		} catch (SQLException e) {
			e.printStackTrace();
			return 0;
		}
	}

	public int borrar(int idRecetaIngredientes) {
		ps = conexion.prepareStatement("");
	}

	public int modificar(RecetaIngredientesVO relacionConId) {
		// TODO Auto-generated method stub
		return 0;
	}

	public RecetaIngredientesVO leerIgual(int idRecetaIngrediente) {
		// TODO Auto-generated method stub
		return null;
	}

	public Set<RecetaIngredientesVO> leerTodo() {
		// TODO Auto-generated method stub
		return null;
	}

}
